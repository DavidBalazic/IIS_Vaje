schema: '2.0'
stages:
  fetch:
    cmd: poetry run python src/data/fetch_air_data.py
    deps:
    - path: src/data/fetch_air_data.py
      hash: md5
      md5: 167e36f83aedbf896a6bf8e417d5d6b9
      size: 926
    params:
      params.yaml:
        fetch.url: https://www.arso.gov.si/xml/zrak/ones_zrak_urni_podatki_7dni.xml
    outs:
    - path: data/raw/air/air_data.xml
      hash: md5
      md5: 53c0330599cac4dd7d3c0ef61354dee2
      size: 1149692
  preprocess:
    cmd: poetry run python src/data/preprocess_air_data.py
    deps:
    - path: data/raw/air/air_data.xml
      hash: md5
      md5: 53c0330599cac4dd7d3c0ef61354dee2
      size: 1149692
    - path: src/data/preprocess_air_data.py
      hash: md5
      md5: 53ccf6de4ee529e1e5de6475b322013f
      size: 2349
    outs:
    - path: data/preprocessed/air
      hash: md5
      md5: 318c3b5329c6150e87263bba33271f8a.dir
      size: 550817
      nfiles: 23
  validate:
    cmd: "cd gx && poetry run python run_checkpoint.py\n"
    deps:
    - path: data/preprocessed/air/
      hash: md5
      md5: 318c3b5329c6150e87263bba33271f8a.dir
      size: 550817
      nfiles: 23
    outs:
    - path: reports/validations
      hash: md5
      md5: d1faa74f75141ca6a17ff7cbc23f261d.dir
      size: 4168251
      nfiles: 23
  test_data:
    cmd: "poetry run python src/data/test_data.py\n"
    deps:
    - path: data/preprocessed/air/
      hash: md5
      md5: 318c3b5329c6150e87263bba33271f8a.dir
      size: 550817
      nfiles: 23
    - path: src/data/test_data.py
      hash: md5
      md5: c75ccdff4537fd8fb6b25fd0cb77b7ba
      size: 2787
    outs:
    - path: data/reference/air
      hash: md5
      md5: 313665dd7d538c96f725f9f9b78ec649.dir
      size: 176110
      nfiles: 23
    - path: reports/tests
      hash: md5
      md5: fb7dac862bd27a6fa1904255c1c7d873.dir
      size: 90485822
      nfiles: 21
