schema: '2.0'
stages:
  fetch:
    cmd: poetry run python src/data/fetch_air_data.py
    deps:
    - path: src/data/fetch_air_data.py
      hash: md5
      md5: 167e36f83aedbf896a6bf8e417d5d6b9
      size: 926
    params:
      params.yaml:
        fetch.url: https://www.arso.gov.si/xml/zrak/ones_zrak_urni_podatki_7dni.xml
    outs:
    - path: data/raw/air/air_data.xml
      hash: md5
      md5: 6cbef2150eb5004e35e4c080a180a656
      size: 1148717
  preprocess:
    cmd: poetry run python src/data/preprocess_air_data.py
    deps:
    - path: data/raw/air/air_data.xml
      hash: md5
      md5: 6cbef2150eb5004e35e4c080a180a656
      size: 1148717
    - path: src/data/preprocess_air_data.py
      hash: md5
      md5: 53ccf6de4ee529e1e5de6475b322013f
      size: 2349
    outs:
    - path: data/preprocessed/air
      hash: md5
      md5: e3a44ec028399f79245ca08d026e8f42.dir
      size: 676235
      nfiles: 23
  validate:
    cmd: "cd gx && poetry run python run_checkpoint.py\n"
    deps:
    - path: data/preprocessed/air/
      hash: md5
      md5: e3a44ec028399f79245ca08d026e8f42.dir
      size: 676235
      nfiles: 23
    outs:
    - path: reports/validations
      hash: md5
      md5: 617e466e0dd608a91658b3560ddf3915.dir
      size: 4186830
      nfiles: 23
  test_data:
    cmd: "poetry run python src/data/test_data.py\n"
    deps:
    - path: data/preprocessed/air/
      hash: md5
      md5: e3a44ec028399f79245ca08d026e8f42.dir
      size: 676235
      nfiles: 23
    - path: src/data/test_data.py
      hash: md5
      md5: ce938cab8df255a05146d6728ddd3784
      size: 2767
    outs:
    - path: data/reference/air
      hash: md5
      md5: 8d3ae877ee30561e37609344207f0af2.dir
      size: 224869
      nfiles: 23
    - path: reports/tests
      hash: md5
      md5: 36abcb96787cbccff75fab0491c44dda.dir
      size: 90429090
      nfiles: 21
  generate_report_index:
    cmd: python scripts/generate_report_index.py
    deps:
    - path: reports/tests
      hash: md5
      md5: 36abcb96787cbccff75fab0491c44dda.dir
      size: 90429090
      nfiles: 21
    - path: reports/validations
      hash: md5
      md5: 617e466e0dd608a91658b3560ddf3915.dir
      size: 4186830
      nfiles: 23
    - path: scripts/generate_report_index.py
      hash: md5
      md5: a020fd2bd8017ada2b2ec0c2cd2dfd13
      size: 538
    outs:
    - path: reports/index.html
      hash: md5
      md5: 1d4c011ee359c9a9969ce0fbe098f46d
      size: 1217
  train:
    cmd: "poetry run python src/model/train.py\n"
    deps:
    - path: data/preprocessed/air/
      hash: md5
      md5: e3a44ec028399f79245ca08d026e8f42.dir
      size: 676235
      nfiles: 23
    - path: data/reference/air
      hash: md5
      md5: 8d3ae877ee30561e37609344207f0af2.dir
      size: 224869
      nfiles: 23
    - path: reports/validations
      hash: md5
      md5: 617e466e0dd608a91658b3560ddf3915.dir
      size: 4186830
      nfiles: 23
    - path: src/model/preprocess.py
      hash: md5
      md5: fc438b6223d1af062be3d512268ecaf2
      size: 1393
    - path: src/model/train.py
      hash: md5
      md5: 1eaf343ff5ad6ec8d4a647b5925a984a
      size: 4853
    params:
      params.yaml:
        train.random_state: 42
        train.stations:
        - E403
        - E404
        - E405
        - E407
        - E408
        - E409
        - E410
        - E411
        - E412
        - E413
        - E414
        - E415
        - E417
        - E418
        - E420
        - E421
        - E423
        - E801
        - E802
        - E804
        train.target_col: PM10
        train.test_size: 312
        train.window_size: 24
    outs:
    - path: models/
      hash: md5
      md5: dab14643203e0c3c79267898244de732.dir
      size: 8138317
      nfiles: 40
